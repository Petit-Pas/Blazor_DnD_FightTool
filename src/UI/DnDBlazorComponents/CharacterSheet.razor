@using System.ComponentModel.DataAnnotations
@using System.Security.Cryptography.X509Certificates
@using global::Characters.AbilityScores
@using global::Characters.AbilityScores.Validation
@using NeoBlazorphic.StyleParameters
@using PeterLeslieMorris.Blazor.Validation

<h1>
    Character Sheet
</h1>

<EditForm Model="_model">
    <Validate />
    @*<DataAnnotationsValidator />*@

    <div class="character-sheet">
        <div class="character-sheet-header">
        
            <h1> HEADER </h1>

        </div>
        <div class="character-sheet-body">
            
            <div class="m-2">
                <AbilityScoresEditableList Abilities="_model.AbilityScoresCollection"></AbilityScoresEditableList>
            </div>
            <div class="m-2" style="width: 400px">
                <SkillsEditableList Skills="_model.SkillCollection" Abilities="_model.AbilityScoresCollection"></SkillsEditableList>
            </div>
            <h1> BODY </h1>

            <button type="submit">Save</button>

        </div>
    </div>

</EditForm>

@code
{
    public CharacterDummy _model = new CharacterDummy();

    public class CharacterDummyValidator : AbstractValidator<CharacterDummy>
    {
        public CharacterDummyValidator()
        {
            RuleFor(x => x.AbilityScoresCollection).SetValidator(new AbilityScoresValidator());
            RuleFor(x => x.Walue).InclusiveBetween(1, 30);

        }

    }
   
    public class CharacterDummy
    {
        public SkillCollection SkillCollection { get; set; } = new SkillCollection();
        public AbilityScoresCollection AbilityScoresCollection { get; set; } = new AbilityScoresCollection();

        public int Walue { get; set; } = 13;

    }
}
