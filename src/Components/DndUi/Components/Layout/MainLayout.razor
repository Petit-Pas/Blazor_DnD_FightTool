@inherits LayoutComponentBase
@using DndUi.Components.Shared
@using MudBlazor

<MudDialogProvider />
<MudSnackbarProvider />
<MudPopoverProvider />
<MudThemeProvider @ref="_mudThemeProvider" IsDarkMode="_isDarkMode" IsDarkModeChanged="OnIsDarkModeChanged" />

<MudLayout>
    <MudAppBar Elevation="1">
        <MudSpacer />
        <ScreenSizeBadge />
        <ThemeToggle MudThemeProvider="@_mudThemeProvider" />
    </MudAppBar>
    <MudDrawer @bind-Open="@_open" Elevation="1" Variant="@DrawerVariant.Mini" OpenMiniOnHover="true" ClipMode="DrawerClipMode.Docked">
        <NavMenu />
    </MudDrawer>
    <MudMainContent Class="px-16 h-100">
        <CascadingValue Value="_isDarkMode" Name="IsDarkMode">
            @Body
        </CascadingValue>
    </MudMainContent>
</MudLayout>

@code {
    private bool _open = false;
    private MudThemeProvider? _mudThemeProvider;
    private bool _isDarkMode;

    private void OnIsDarkModeChanged(bool value)
    {
        _isDarkMode = value;
        StateHasChanged();
    }
}

